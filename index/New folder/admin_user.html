<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin & Users Management</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #fff;
      padding: 20px;
    }

    h2 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #1e1e1e;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #333;
    }

    .btn {
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }

    .btn-status.active {
      background-color: #4CAF50;
    }

    .btn-status.inactive {
      background-color: #FFEB3B;
      color: #000;
    }

    .btn-edit {
      background-color: #2196F3;
      color: white;
    }

    .btn-delete {
      background-color: #f44336;
      color: white;
    }

    .btn-view {
      background-color: #9C27B0;
      color: white;
    }

    .actions {
      display: flex;
      gap: 5px;
      justify-content: center;
    }

    form {
      margin-top: 30px;
      background-color: #1e1e1e;
      padding: 20px;
      border-radius: 8px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 4px;
    }

    .btn-submit {
      width: 100%;
      background-color: #00BCD4;
      color: white;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .modal-content {
      background-color: #1e1e1e;
      padding: 20px;
      border-radius: 10px;
      width: 300px;
      color: #fff;
      text-align: left;
    }

    .modal-content h4 {
      margin-top: 0;
    }

    .close-btn {
      background-color: #f44336;
      color: white;
      padding: 5px 10px;
      float: right;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Admin & Users Management</h2>

  <table id="userTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Status</th>
        <th>Registered At</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data will be added dynamically -->
    </tbody>
  </table>

  <form id="userForm">
    <h3 id="formTitle">Add New User</h3>
    <input type="text" id="name" placeholder="Full Name" required />
    <input type="email" id="email" placeholder="Email Address" required />
    <select id="role">
      <option value="Admin">Admin</option>
      <option value="User">User</option>
    </select>
    <button type="submit" class="btn btn-submit">Save</button>
  </form>

  <!-- Modal for Viewing User Details -->
  <div class="modal" id="viewModal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">X</button>
      <h4>User Details</h4>
      <p id="viewDetails"></p>
    </div>
  </div>

  <script>
    const userTable = document.querySelector("#userTable tbody");
    const userForm = document.getElementById("userForm");
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const roleInput = document.getElementById("role");
    const formTitle = document.getElementById("formTitle");
    const submitBtn = userForm.querySelector("button");

    let users = [];
    let editIndex = -1;

    function renderTable() {
      userTable.innerHTML = "";
      users.forEach((user, index) => {
        const row = document.createElement("tr");

        row.innerHTML = `
          <td>#00${index + 1}</td>
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td>${user.role}</td>
          <td>
            <button class="btn btn-status ${user.status.toLowerCase()}" onclick="toggleStatus(${index})">
              ${user.status}
            </button>
          </td>
          <td>${user.date}</td>
          <td class="actions">
            <button class="btn btn-view" onclick="viewUser(${index})">View</button>
            <button class="btn btn-edit" onclick="editUser(${index})">Edit</button>
            <button class="btn btn-delete" onclick="deleteUser(${index})">Delete</button>
          </td>
        `;
        userTable.appendChild(row);
      });
    }

    function toggleStatus(index) {
      users[index].status = users[index].status === "Active" ? "Inactive" : "Active";
      renderTable();
    }

    function deleteUser(index) {
      if (confirm("Are you sure you want to delete this user?")) {
        users.splice(index, 1);
        renderTable();
      }
    }

    function editUser(index) {
      const user = users[index];
      nameInput.value = user.name;
      emailInput.value = user.email;
      roleInput.value = user.role;
      editIndex = index;
      formTitle.textContent = "Edit User";
      submitBtn.textContent = "Update";
    }

    function viewUser(index) {
      const user = users[index];
      const isSuperAdmin = user.role === "Admin" ? "Yes (Super Admin)" : "No";
      const password = user.password || "********";
      const details = `
        <strong>Name:</strong> ${user.name}<br>
        <strong>Email:</strong> ${user.email}<br>
        <strong>Password:</strong> ${password}<br>
        <strong>Role:</strong> ${user.role}<br>
        <strong>Super Admin:</strong> ${isSuperAdmin}<br>
        <strong>Status:</strong> ${user.status}<br>
        <strong>Registered At:</strong> ${user.date}
      `;
      document.getElementById("viewDetails").innerHTML = details;
      document.getElementById("viewModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("viewModal").style.display = "none";
    }

    userForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const newUser = {
        name: nameInput.value,
        email: emailInput.value,
        role: roleInput.value,
        status: "Active",
        password: "test1234", // كلمة سر افتراضية
        date: new Date().toISOString().split("T")[0]
      };

      if (editIndex === -1) {
        users.push(newUser);
      } else {
        users[editIndex] = newUser;
        editIndex = -1;
        formTitle.textContent = "Add New User";
        submitBtn.textContent = "Save";
      }

      userForm.reset();
      renderTable();
    });

    // Default users
    users = [
      { name: "Roza", email: "roza@email.com", role: "Admin", status: "Active", password: "roza@123", date: "2024-06-01" },
      { name: "Asmaa", email: "asmaa@email.com", role: "User", status: "Inactive", password: "asmaa456", date: "2024-06-03" }
    ];

    renderTable();
  </script>

</body>
</html>